import{r as f,j as e,S as b}from"./app-oyOb_ZaZ.js";import{T as g,a as y,b as n,c as a,d as S,e as l}from"./table-CsgkWl1M.js";import{B as d}from"./badge-CsBhqgKW.js";import{S as k,a as T,b as v,c as N,d as c}from"./select-Bgn9Cd-k.js";import{t as m}from"./index-aFORZ6EM.js";import"./utils-jAU0Cazi.js";import"./index-KEqQ0z3-.js";import"./index-CEzHj2C6.js";import"./index-BdQq_4o_.js";import"./floating-ui.react-dom-BLk6X554.js";import"./index-BeK9LGoy.js";import"./chevron-down-B1X8Qeg5.js";import"./createLucideIcon-CPdYBbG9.js";import"./chevron-up-CD3KyH3Q.js";function L({payments:x,paymentMethodColors:h}){const[i,u]=f.useState(x),j=(r,t)=>{b.post(`/billing/payments/${r}/update-remarks`,{remarks:t},{preserveScroll:!0,onSuccess:()=>{u(o=>o.map(s=>s.id===r?{...s,remarks:t}:s)),m.success("Remarks updated successfully.")},onError:()=>{m.error("Failed to update remarks.")}})};return e.jsx("div",{children:i.length>0?e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs(n,{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx(a,{children:"OR Number"}),e.jsx(a,{children:"Item"}),e.jsx(a,{children:"Method"}),e.jsx(a,{children:"Remarks"}),e.jsx(a,{children:"Date"}),e.jsx(a,{className:"text-right",children:"Amount"})]})}),e.jsx(S,{children:i.map(r=>{var o,s;const t=h[r.payment_method]||"#9ca3af";return e.jsxs(n,{children:[e.jsx(l,{children:r.or_number}),e.jsx(l,{children:((s=(o=r.billing)==null?void 0:o.category)==null?void 0:s.name)??"—"}),e.jsx(l,{className:"capitalize",children:e.jsx(d,{variant:"secondary",style:{backgroundColor:t,color:"#fff"},children:r.payment_method.replace("_"," ")})}),e.jsx(l,{children:e.jsxs(k,{value:r.remarks,onValueChange:p=>j(r.id,p),children:[e.jsx(T,{className:"w-[150px]",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(c,{value:"partial_payment",children:"Partial Payment"}),e.jsx(c,{value:"down_payment",children:"Down Payment"}),e.jsx(c,{value:"full_payment",children:"Full Payment"})]})]})}),e.jsx(l,{children:r.payment_date}),e.jsx(l,{className:"text-right",children:e.jsxs(d,{variant:"secondary",style:{backgroundColor:t,color:"#fff"},children:["₱ ",parseFloat(r.amount).toFixed(2)]})})]},r.id)})})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No payment records found for this student."})})}export{L as PaymentTable};
