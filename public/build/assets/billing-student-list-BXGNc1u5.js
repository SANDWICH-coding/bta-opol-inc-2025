import{K as S,r as m,j as e,L as b,S as n}from"./app-CWAbBtiy.js";import{B as C}from"./button-DlUtIcJZ.js";import{C as N,a as L,b as y,d as A,e as T,c as w}from"./card-CYrEytid.js";import{S as v,a as $,b as B,c as R,d as Y}from"./select-CmAk1elB.js";import{T as k,a as H,b as h,c as a,d as V,e as l}from"./table-CY0a4SEl.js";import{A as D}from"./app-layout-C3fil_2L.js";import{S as E}from"./searchbar-C-vWC2ia.js";import{A as F,a as I,b as Q,c as K}from"./accordion-D6blfz2G.js";import{A as M}from"./arrow-right-CB7P96Ty.js";import"./index-B8rauVpy.js";import"./utils-jAU0Cazi.js";import"./index-DuKB3EkD.js";import"./index-BdQq_4o_.js";import"./tooltip-CWUIn_wR.js";import"./index-Cr1AGP8Y.js";import"./chevron-down-DXW6UHIi.js";import"./app-logo-icon-DXUcpSx7.js";import"./chevron-up-Dsldqtsl.js";import"./avatar-CnUWxqXv.js";import"./input-C_STf5Wk.js";import"./search-BL6HKfXF.js";import"./index-U7L4k0d7.js";const O=[{title:"Students",href:"/billing/students"}];function pe(){const{students:i,schoolYears:x,selectedSchoolYear:c}=S().props,p=i.reduce((s,r)=>(s[r.yearLevel]||(s[r.yearLevel]=[]),s[r.yearLevel].push(r),s),{}),[P,u]=m.useState(""),[U,d]=m.useState(null),j=i.map(s=>`${s.firstName} ${s.lastName}`),f=s=>{u(s);const r=i.find(t=>`${t.firstName} ${t.lastName}`.toLowerCase()===s.toLowerCase());r?(d(r),n.get(`/billing/students/${r.id}`)):d(null)},g=s=>{n.get(route("billing.students"),s,{preserveScroll:!0})};function o(s){return s.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase())}return e.jsxs(D,{breadcrumbs:O,children:[e.jsx(b,{title:"Students"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(y,{children:c}),e.jsx(A,{children:"List of enrollment in this school year."}),e.jsx(T,{className:"flex flex-wrap gap-2",children:e.jsxs(v,{onValueChange:s=>g({school_year:s}),defaultValue:c,children:[e.jsx($,{children:e.jsx(B,{placeholder:"School Year"})}),e.jsx(R,{children:x.map(s=>e.jsx(Y,{value:s.name,children:s.name},s.id))})]})})]}),e.jsxs(w,{children:[e.jsx("div",{className:"flex justify-start mb-4",children:e.jsx(E,{suggestions:j,onSelect:f,placeholder:"Search student"})}),e.jsx(F,{type:"multiple",className:"w-full",children:Object.entries(p).map(([s,r])=>e.jsxs(I,{value:s,children:[e.jsxs(Q,{className:"text-base font-semibold",children:[s," (",r.length," students)"]}),e.jsx(K,{children:e.jsxs(k,{children:[e.jsx(H,{children:e.jsxs(h,{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx(a,{children:"LRN"}),e.jsx(a,{children:"First name"}),e.jsx(a,{children:"Middle name"}),e.jsx(a,{children:"Last name"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(V,{children:r.map(t=>e.jsxs(h,{children:[e.jsx(l,{children:t.lrn}),e.jsx(l,{children:o(t.firstName)}),e.jsx(l,{children:o(t.middleName||"-")}),e.jsx(l,{children:o(t.lastName)}),e.jsx(l,{className:"text-right",children:e.jsxs(C,{variant:"link",onClick:()=>n.get(`/billing/students/${t.id}`),children:["Details ",e.jsx(M,{className:"ml-1"})]})})]},t.id))})]})})]},s))}),i.length===0&&e.jsx("p",{className:"text-center text-muted-foreground mt-6",children:"No students found for the selected school year."})]})]})})]})}export{pe as default};
