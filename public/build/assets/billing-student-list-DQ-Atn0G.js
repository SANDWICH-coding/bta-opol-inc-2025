import{r as m,j as e,L as w,S as P}from"./app-Weu2sa_7.js";import{c as R,d as y,e as k,f as M,A as T,g as F,h as I,i as D,j as L}from"./app-layout-CvqqPR6q.js";import{B as u}from"./button-BmLIQtq1.js";import{u as $,f as p,g as V,a as A,b as E,c as B}from"./index-CkYpPuDL.js";import{T as H,a as z,b as x,c as _,d as W,e as j}from"./table-ClaDa3y-.js";import{I as q}from"./input-C6FI_FKq.js";import{C as G}from"./chevron-down-CFhqN4Z9.js";import{C as f}from"./checkbox-CriBh1RP.js";import"./index-Dx_Nhtqa.js";import"./app-logo-icon-B4Cg3R_B.js";function J({columns:a,data:t,filterKey:i}){var h;const[r,c]=m.useState([]),[o,d]=m.useState([]),[g,C]=m.useState({}),[N,S]=m.useState({}),[b,v]=m.useState({pageIndex:0,pageSize:10}),l=$({data:t,columns:a,getCoreRowModel:B(),getPaginationRowModel:E(),getSortedRowModel:A(),getFilteredRowModel:V(),onSortingChange:c,onColumnFiltersChange:d,onColumnVisibilityChange:C,onRowSelectionChange:S,onPaginationChange:v,state:{sorting:r,columnFilters:o,columnVisibility:g,rowSelection:N,pagination:b}});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(q,{placeholder:`Filter by ${String(i)}...`,value:((h=l.getColumn(i))==null?void 0:h.getFilterValue())??"",onChange:s=>{var n;return(n=l.getColumn(i))==null?void 0:n.setFilterValue(s.target.value)},className:"max-w-sm"}),e.jsxs(R,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"ml-auto",children:["Columns ",e.jsx(G,{className:"ml-2 h-4 w-4"})]})}),e.jsx(k,{align:"end",children:l.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(M,{checked:s.getIsVisible(),onCheckedChange:n=>s.toggleVisibility(!!n),children:s.id},s.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(H,{children:[e.jsx(z,{children:l.getHeaderGroups().map(s=>e.jsx(x,{children:s.headers.map(n=>e.jsx(_,{children:n.isPlaceholder?null:p(n.column.columnDef.header,n.getContext())},n.id))},s.id))}),e.jsx(W,{children:l.getRowModel().rows.length?l.getRowModel().rows.map(s=>e.jsx(x,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(n=>e.jsx(j,{children:p(n.column.columnDef.cell,n.getContext())},n.id))},s.id)):e.jsx(x,{children:e.jsx(j,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),e.jsx("select",{value:l.getState().pagination.pageSize,onChange:s=>l.setPageSize(Number(s.target.value)),className:"text-sm border rounded px-2 py-1",children:[5,10,20,50].map(s=>e.jsxs("option",{value:s,children:["Show ",s]},s))})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",l.getState().pagination.pageIndex+1," of ",l.getPageCount()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]})]})]})}const O=[{id:"select",header:({table:a})=>e.jsx(f,{checked:a.getIsAllPageRowsSelected(),onCheckedChange:t=>a.toggleAllPageRowsSelected(!!t),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(f,{checked:a.getIsSelected(),onCheckedChange:t=>a.toggleSelected(!!t),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{id:"Student",header:"Student",cell:({row:a})=>{var o,d;const t=a.original,[i,r]=m.useState(!1),c=i||!t.profilePhoto?"/images/avatar-place-holder.png":`/storage/${t.profilePhoto}`;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(F,{className:"h-8 w-8",children:[e.jsx(I,{src:c,onError:()=>r(!0),alt:`${t.firstName} ${t.lastName}`}),e.jsxs(D,{children:[(o=t.firstName)==null?void 0:o[0],(d=t.lastName)==null?void 0:d[0]]})]}),e.jsxs("div",{className:"text-sm font-medium",children:[t.lastName,", ",t.firstName," ",t.middleName??""," ",t.suffix??""]})]})},accessorFn:a=>`${a.lastName} ${a.firstName} ${a.middleName??""} ${a.suffix??""}`,filterFn:(a,t,i)=>{var r;return(r=a.getValue(t))==null?void 0:r.toLowerCase().includes(i.toLowerCase())}},{id:"Total Payments",header:"Total Payments",cell:()=>e.jsx("span",{className:"text-muted-foreground",children:"—"})},{id:"Status",header:"Status",cell:()=>e.jsx("span",{className:"text-muted-foreground",children:"—"})},{id:"Latest Payment",header:"Latest Payment",cell:()=>e.jsx("span",{className:"text-muted-foreground",children:"—"})},{id:"Details",header:"Details",cell:({row:a})=>e.jsx(u,{variant:"link",className:"text-sm text-blue-600 hover:underline",onClick:()=>{var t;return P.get(`/billing/student/${(t=a.original.enrollments[0])==null?void 0:t.id}`)},children:e.jsx(L,{className:"text-pink-400",strokeWidth:3})})}];function le({students:a,schoolYear:t}){var c,o,d,g;const i=((g=(d=(o=(c=a[0])==null?void 0:c.enrollments[0])==null?void 0:o.class_arm)==null?void 0:d.year_level)==null?void 0:g.yearLevelName)??"—",r=[{title:"Billing",href:"/billing/"},{title:t.name,href:`/billing/school-year/${t.id}`},{title:i,href:"#"}];return e.jsxs(T,{breadcrumbs:r,children:[e.jsx(w,{title:"Enrolled Students"}),e.jsx("div",{className:"p-6",children:e.jsx(J,{columns:O,data:a,filterKey:"Student"})})]})}export{le as default};
