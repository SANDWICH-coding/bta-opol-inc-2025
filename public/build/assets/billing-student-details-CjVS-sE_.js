import{r as i,j as t,t as we,U as G,L as Tt,S as re}from"./app-CWAbBtiy.js";import{B as Pt}from"./badge-CmXYSy0S.js";import{B as E}from"./button-DlUtIcJZ.js";import{C as $e,a as Le,b as Ue,d as Be,e as Ge,c as Ve}from"./card-CYrEytid.js";import"./index-DuKB3EkD.js";import{a as ae}from"./index-B8rauVpy.js";import{c as H}from"./utils-jAU0Cazi.js";import{C as At,S as Q,a as J,b as X,c as Y,d as D}from"./select-CmAk1elB.js";import{D as he,a as pe,b as xe,c as be,d as ge,e as ve}from"./dialog-iGmtdlQw.js";import{L as M}from"./label-dXbqEWMu.js";import{M as Et,a as Ft,b as Ot,c as Dt,d as Ce,f as ye}from"./menubar-DiPkfhkw.js";import{A as $t}from"./app-layout-C3fil_2L.js";import{T as Lt,t as z}from"./index-ClQSdCx4.js";import{I as Z}from"./input-C_STf5Wk.js";import{S as Ut}from"./searchbar-C-vWC2ia.js";import{StudentCard as Bt}from"./student-card-name-CNM0f-tA.js";import{PaymentTable as Gt}from"./payment-table-BGrENQ1L.js";import{BillingBreakdownTable as Vt}from"./billing-breakdown-table-BIAXOBXx.js";import{InstallmentPlanTable as zt}from"./installment-plan-table-BBaAvo6J.js";import{c as Ie}from"./app-logo-icon-DXUcpSx7.js";import{L as je}from"./loader-circle-DQV2ftZ6.js";import"./index-BdQq_4o_.js";import"./tooltip-CWUIn_wR.js";import"./index-Cr1AGP8Y.js";import"./chevron-down-DXW6UHIi.js";import"./chevron-up-Dsldqtsl.js";import"./avatar-CnUWxqXv.js";import"./search-BL6HKfXF.js";import"./table-CY0a4SEl.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Kt=Ie("FilePlus",qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Qt=Ie("Printer",Wt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Xt=Ie("Settings2",Jt);function ze(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Yt(...e){return n=>{let r=!1;const s=e.map(o=>{const a=ze(o,n);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let o=0;o<s.length;o++){const a=s[o];typeof a=="function"?a():ze(e[o],null)}}}}function ke(...e){return i.useCallback(Yt(...e),e)}function Zt(e,n=[]){let r=[];function s(a,c){const l=i.createContext(c),u=r.length;r=[...r,c];const m=d=>{var g;const{scope:p,children:b,...C}=d,v=((g=p==null?void 0:p[e])==null?void 0:g[u])||l,x=i.useMemo(()=>C,Object.values(C));return t.jsx(v.Provider,{value:x,children:b})};m.displayName=a+"Provider";function f(d,p){var v;const b=((v=p==null?void 0:p[e])==null?void 0:v[u])||l,C=i.useContext(b);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[m,f]}const o=()=>{const a=r.map(c=>i.createContext(c));return function(l){const u=(l==null?void 0:l[e])||a;return i.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[s,Ht(o,...n)]}function Ht(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const c=s.reduce((l,{useScope:u,scopeName:m})=>{const d=u(a)[`__scope${m}`];return{...l,...d}},{});return i.useMemo(()=>({[`__scope${n.scopeName}`]:c}),[c])}};return r.scopeName=n.scopeName,r}function qe(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}var ie=globalThis!=null&&globalThis.document?i.useLayoutEffect:()=>{},en=we[" useInsertionEffect ".trim().toString()]||ie;function tn({prop:e,defaultProp:n,onChange:r=()=>{},caller:s}){const[o,a,c]=nn({defaultProp:n,onChange:r}),l=e!==void 0,u=l?e:o;{const f=i.useRef(e!==void 0);i.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const m=i.useCallback(f=>{var d;if(l){const p=rn(f)?f(e):f;p!==e&&((d=c.current)==null||d.call(c,p))}else a(f)},[l,e,a,c]);return[u,m]}function nn({defaultProp:e,onChange:n}){const[r,s]=i.useState(e),o=i.useRef(r),a=i.useRef(n);return en(()=>{a.current=n},[n]),i.useEffect(()=>{var c;o.current!==r&&((c=a.current)==null||c.call(a,r),o.current=r)},[r,o]),[r,s,a]}function rn(e){return typeof e=="function"}function on(e){const n=i.useRef({value:e,previous:e});return i.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}function sn(e){const[n,r]=i.useState(void 0);return ie(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let c,l;if("borderBoxSize"in a){const u=a.borderBoxSize,m=Array.isArray(u)?u[0]:u;c=m.inlineSize,l=m.blockSize}else c=e.offsetWidth,l=e.offsetHeight;r({width:c,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),n}function an(e,n){return i.useReducer((r,s)=>n[r][s]??r,e)}var Je=e=>{const{present:n,children:r}=e,s=cn(n),o=typeof r=="function"?r({present:s.isPresent}):i.Children.only(r),a=ke(s.ref,ln(o));return typeof r=="function"||s.isPresent?i.cloneElement(o,{ref:a}):null};Je.displayName="Presence";function cn(e){const[n,r]=i.useState(),s=i.useRef(null),o=i.useRef(e),a=i.useRef("none"),c=e?"mounted":"unmounted",[l,u]=an(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const m=oe(s.current);a.current=l==="mounted"?m:"none"},[l]),ie(()=>{const m=s.current,f=o.current;if(f!==e){const p=a.current,b=oe(m);e?u("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?u("UNMOUNT"):u(f&&p!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),ie(()=>{if(n){let m;const f=n.ownerDocument.defaultView??window,d=b=>{const v=oe(s.current).includes(b.animationName);if(b.target===n&&v&&(u("ANIMATION_END"),!o.current)){const x=n.style.animationFillMode;n.style.animationFillMode="forwards",m=f.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=x)})}},p=b=>{b.target===n&&(a.current=oe(s.current))};return n.addEventListener("animationstart",p),n.addEventListener("animationcancel",d),n.addEventListener("animationend",d),()=>{f.clearTimeout(m),n.removeEventListener("animationstart",p),n.removeEventListener("animationcancel",d),n.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:i.useCallback(m=>{s.current=m?getComputedStyle(m):null,r(m)},[])}}function oe(e){return(e==null?void 0:e.animationName)||"none"}function ln(e){var s,o;let n=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var un=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=un.reduce((e,n)=>{const r=ae(`Primitive.${n}`),s=i.forwardRef((o,a)=>{const{asChild:c,...l}=o,u=c?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(u,{...l,ref:a})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{}),ue="Checkbox",[dn,kr]=Zt(ue),[mn,_e]=dn(ue);function fn(e){const{__scopeCheckbox:n,checked:r,children:s,defaultChecked:o,disabled:a,form:c,name:l,onCheckedChange:u,required:m,value:f="on",internal_do_not_use_render:d}=e,[p,b]=tn({prop:r,defaultProp:o??!1,onChange:u,caller:ue}),[C,v]=i.useState(null),[x,g]=i.useState(null),y=i.useRef(!1),j=C?!!c||!!C.closest("form"):!0,S={checked:p,disabled:a,setChecked:b,control:C,setControl:v,name:l,form:c,value:f,hasConsumerStoppedPropagationRef:y,required:m,defaultChecked:$(o)?!1:o,isFormControl:j,bubbleInput:x,setBubbleInput:g};return t.jsx(mn,{scope:n,...S,children:hn(d)?d(S):s})}var Xe="CheckboxTrigger",Ye=i.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:r,...s},o)=>{const{control:a,value:c,disabled:l,checked:u,required:m,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:p,isFormControl:b,bubbleInput:C}=_e(Xe,e),v=ke(o,f),x=i.useRef(u);return i.useEffect(()=>{const g=a==null?void 0:a.form;if(g){const y=()=>d(x.current);return g.addEventListener("reset",y),()=>g.removeEventListener("reset",y)}},[a,d]),t.jsx(Me.button,{type:"button",role:"checkbox","aria-checked":$(u)?"mixed":u,"aria-required":m,"data-state":rt(u),"data-disabled":l?"":void 0,disabled:l,value:c,...s,ref:v,onKeyDown:qe(n,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:qe(r,g=>{d(y=>$(y)?!0:!y),C&&b&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})})});Ye.displayName=Xe;var Ze=i.forwardRef((e,n)=>{const{__scopeCheckbox:r,name:s,checked:o,defaultChecked:a,required:c,disabled:l,value:u,onCheckedChange:m,form:f,...d}=e;return t.jsx(fn,{__scopeCheckbox:r,checked:o,defaultChecked:a,disabled:l,required:c,onCheckedChange:m,name:s,form:f,value:u,internal_do_not_use_render:({isFormControl:p})=>t.jsxs(t.Fragment,{children:[t.jsx(Ye,{...d,ref:n,__scopeCheckbox:r}),p&&t.jsx(nt,{__scopeCheckbox:r})]})})});Ze.displayName=ue;var He="CheckboxIndicator",et=i.forwardRef((e,n)=>{const{__scopeCheckbox:r,forceMount:s,...o}=e,a=_e(He,r);return t.jsx(Je,{present:s||$(a.checked)||a.checked===!0,children:t.jsx(Me.span,{"data-state":rt(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:n,style:{pointerEvents:"none",...e.style}})})});et.displayName=He;var tt="CheckboxBubbleInput",nt=i.forwardRef(({__scopeCheckbox:e,...n},r)=>{const{control:s,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:c,required:l,disabled:u,name:m,value:f,form:d,bubbleInput:p,setBubbleInput:b}=_e(tt,e),C=ke(r,b),v=on(a),x=sn(s);i.useEffect(()=>{const y=p;if(!y)return;const j=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(j,"checked").set,_=!o.current;if(v!==a&&I){const R=new Event("click",{bubbles:_});y.indeterminate=$(a),I.call(y,$(a)?!1:a),y.dispatchEvent(R)}},[p,v,a,o]);const g=i.useRef($(a)?!1:a);return t.jsx(Me.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??g.current,required:l,disabled:u,name:m,value:f,form:d,...n,tabIndex:-1,ref:C,style:{...n.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});nt.displayName=tt;function hn(e){return typeof e=="function"}function $(e){return e==="indeterminate"}function rt(e){return $(e)?"indeterminate":e?"checked":"unchecked"}function pn({className:e,...n}){return t.jsx(Ze,{"data-slot":"checkbox",className:H("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:t.jsx(et,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:t.jsx(At,{className:"size-3.5"})})})}function F(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}function Re(e,n=[]){let r=[];function s(a,c){const l=i.createContext(c),u=r.length;r=[...r,c];const m=d=>{var g;const{scope:p,children:b,...C}=d,v=((g=p==null?void 0:p[e])==null?void 0:g[u])||l,x=i.useMemo(()=>C,Object.values(C));return t.jsx(v.Provider,{value:x,children:b})};m.displayName=a+"Provider";function f(d,p){var v;const b=((v=p==null?void 0:p[e])==null?void 0:v[u])||l,C=i.useContext(b);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[m,f]}const o=()=>{const a=r.map(c=>i.createContext(c));return function(l){const u=(l==null?void 0:l[e])||a;return i.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[s,xn(o,...n)]}function xn(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const c=s.reduce((l,{useScope:u,scopeName:m})=>{const d=u(a)[`__scope${m}`];return{...l,...d}},{});return i.useMemo(()=>({[`__scope${n.scopeName}`]:c}),[c])}};return r.scopeName=n.scopeName,r}function Ke(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function bn(...e){return n=>{let r=!1;const s=e.map(o=>{const a=Ke(o,n);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let o=0;o<s.length;o++){const a=s[o];typeof a=="function"?a():Ke(e[o],null)}}}}function ce(...e){return i.useCallback(bn(...e),e)}function gn(e){const n=e+"CollectionProvider",[r,s]=Re(n),[o,a]=r(n,{collectionRef:{current:null},itemMap:new Map}),c=v=>{const{scope:x,children:g}=v,y=G.useRef(null),j=G.useRef(new Map).current;return t.jsx(o,{scope:x,itemMap:j,collectionRef:y,children:g})};c.displayName=n;const l=e+"CollectionSlot",u=ae(l),m=G.forwardRef((v,x)=>{const{scope:g,children:y}=v,j=a(l,g),S=ce(x,j.collectionRef);return t.jsx(u,{ref:S,children:y})});m.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",p=ae(f),b=G.forwardRef((v,x)=>{const{scope:g,children:y,...j}=v,S=G.useRef(null),I=ce(x,S),_=a(f,g);return G.useEffect(()=>(_.itemMap.set(S,{ref:S,...j}),()=>void _.itemMap.delete(S))),t.jsx(p,{[d]:"",ref:I,children:y})});b.displayName=f;function C(v){const x=a(e+"CollectionConsumer",v);return G.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((_,R)=>j.indexOf(_.ref.current)-j.indexOf(R.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:c,Slot:m,ItemSlot:b},C,s]}var le=globalThis!=null&&globalThis.document?i.useLayoutEffect:()=>{},vn=we[" useId ".trim().toString()]||(()=>{}),Cn=0;function ot(e){const[n,r]=i.useState(vn());return le(()=>{r(s=>s??String(Cn++))},[e]),e||(n?`radix-${n}`:"")}var yn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=yn.reduce((e,n)=>{const r=ae(`Primitive.${n}`),s=i.forwardRef((o,a)=>{const{asChild:c,...l}=o,u=c?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(u,{...l,ref:a})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{});function jn(e){const n=i.useRef(e);return i.useEffect(()=>{n.current=e}),i.useMemo(()=>(...r)=>{var s;return(s=n.current)==null?void 0:s.call(n,...r)},[])}var Sn=we[" useInsertionEffect ".trim().toString()]||le;function st({prop:e,defaultProp:n,onChange:r=()=>{},caller:s}){const[o,a,c]=Nn({defaultProp:n,onChange:r}),l=e!==void 0,u=l?e:o;{const f=i.useRef(e!==void 0);i.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const m=i.useCallback(f=>{var d;if(l){const p=wn(f)?f(e):f;p!==e&&((d=c.current)==null||d.call(c,p))}else a(f)},[l,e,a,c]);return[u,m]}function Nn({defaultProp:e,onChange:n}){const[r,s]=i.useState(e),o=i.useRef(r),a=i.useRef(n);return Sn(()=>{a.current=n},[n]),i.useEffect(()=>{var c;o.current!==r&&((c=a.current)==null||c.call(a,r),o.current=r)},[r,o]),[r,s,a]}function wn(e){return typeof e=="function"}var In=i.createContext(void 0);function at(e){const n=i.useContext(In);return e||n||"ltr"}var Se="rovingFocusGroup.onEntryFocus",kn={bubbles:!1,cancelable:!0},ee="RovingFocusGroup",[Ne,it,Mn]=gn(ee),[_n,ct]=Re(ee,[Mn]),[Rn,Tn]=_n(ee),lt=i.forwardRef((e,n)=>t.jsx(Ne.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Ne.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Pn,{...e,ref:n})})}));lt.displayName=ee;var Pn=i.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:o=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:m,preventScrollOnEntryFocus:f=!1,...d}=e,p=i.useRef(null),b=ce(n,p),C=at(a),[v,x]=st({prop:c,defaultProp:l??null,onChange:u,caller:ee}),[g,y]=i.useState(!1),j=jn(m),S=it(r),I=i.useRef(!1),[_,R]=i.useState(0);return i.useEffect(()=>{const w=p.current;if(w)return w.addEventListener(Se,j),()=>w.removeEventListener(Se,j)},[j]),t.jsx(Rn,{scope:r,orientation:s,dir:C,loop:o,currentTabStopId:v,onItemFocus:i.useCallback(w=>x(w),[x]),onItemShiftTab:i.useCallback(()=>y(!0),[]),onFocusableItemAdd:i.useCallback(()=>R(w=>w+1),[]),onFocusableItemRemove:i.useCallback(()=>R(w=>w-1),[]),children:t.jsx(q.div,{tabIndex:g||_===0?-1:0,"data-orientation":s,...d,ref:b,style:{outline:"none",...e.style},onMouseDown:F(e.onMouseDown,()=>{I.current=!0}),onFocus:F(e.onFocus,w=>{const K=!I.current;if(w.target===w.currentTarget&&K&&!g){const te=new CustomEvent(Se,kn);if(w.currentTarget.dispatchEvent(te),!te.defaultPrevented){const L=S().filter(P=>P.focusable),me=L.find(P=>P.active),U=L.find(P=>P.id===v),Ae=[me,U,...L].filter(Boolean).map(P=>P.ref.current);mt(Ae,f)}}I.current=!1}),onBlur:F(e.onBlur,()=>y(!1))})})}),ut="RovingFocusGroupItem",dt=i.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:o=!1,tabStopId:a,children:c,...l}=e,u=ot(),m=a||u,f=Tn(ut,r),d=f.currentTabStopId===m,p=it(r),{onFocusableItemAdd:b,onFocusableItemRemove:C,currentTabStopId:v}=f;return i.useEffect(()=>{if(s)return b(),()=>C()},[s,b,C]),t.jsx(Ne.ItemSlot,{scope:r,id:m,focusable:s,active:o,children:t.jsx(q.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:n,onMouseDown:F(e.onMouseDown,x=>{s?f.onItemFocus(m):x.preventDefault()}),onFocus:F(e.onFocus,()=>f.onItemFocus(m)),onKeyDown:F(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const g=Fn(x,f.orientation,f.dir);if(g!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let j=p().filter(S=>S.focusable).map(S=>S.ref.current);if(g==="last")j.reverse();else if(g==="prev"||g==="next"){g==="prev"&&j.reverse();const S=j.indexOf(x.currentTarget);j=f.loop?On(j,S+1):j.slice(S+1)}setTimeout(()=>mt(j))}}),children:typeof c=="function"?c({isCurrentTabStop:d,hasTabStop:v!=null}):c})})});dt.displayName=ut;var An={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function En(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Fn(e,n,r){const s=En(e.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return An[s]}function mt(e,n=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:n}),document.activeElement!==r))return}function On(e,n){return e.map((r,s)=>e[(n+s)%e.length])}var Dn=lt,$n=dt;function Ln(e,n){return i.useReducer((r,s)=>n[r][s]??r,e)}var ft=e=>{const{present:n,children:r}=e,s=Un(n),o=typeof r=="function"?r({present:s.isPresent}):i.Children.only(r),a=ce(s.ref,Bn(o));return typeof r=="function"||s.isPresent?i.cloneElement(o,{ref:a}):null};ft.displayName="Presence";function Un(e){const[n,r]=i.useState(),s=i.useRef(null),o=i.useRef(e),a=i.useRef("none"),c=e?"mounted":"unmounted",[l,u]=Ln(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const m=se(s.current);a.current=l==="mounted"?m:"none"},[l]),le(()=>{const m=s.current,f=o.current;if(f!==e){const p=a.current,b=se(m);e?u("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?u("UNMOUNT"):u(f&&p!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),le(()=>{if(n){let m;const f=n.ownerDocument.defaultView??window,d=b=>{const v=se(s.current).includes(b.animationName);if(b.target===n&&v&&(u("ANIMATION_END"),!o.current)){const x=n.style.animationFillMode;n.style.animationFillMode="forwards",m=f.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=x)})}},p=b=>{b.target===n&&(a.current=se(s.current))};return n.addEventListener("animationstart",p),n.addEventListener("animationcancel",d),n.addEventListener("animationend",d),()=>{f.clearTimeout(m),n.removeEventListener("animationstart",p),n.removeEventListener("animationcancel",d),n.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:i.useCallback(m=>{s.current=m?getComputedStyle(m):null,r(m)},[])}}function se(e){return(e==null?void 0:e.animationName)||"none"}function Bn(e){var s,o;let n=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var de="Tabs",[Gn,Mr]=Re(de,[ct]),ht=ct(),[Vn,Te]=Gn(de),pt=i.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,onValueChange:o,defaultValue:a,orientation:c="horizontal",dir:l,activationMode:u="automatic",...m}=e,f=at(l),[d,p]=st({prop:s,onChange:o,defaultProp:a??"",caller:de});return t.jsx(Vn,{scope:r,baseId:ot(),value:d,onValueChange:p,orientation:c,dir:f,activationMode:u,children:t.jsx(q.div,{dir:f,"data-orientation":c,...m,ref:n})})});pt.displayName=de;var xt="TabsList",bt=i.forwardRef((e,n)=>{const{__scopeTabs:r,loop:s=!0,...o}=e,a=Te(xt,r),c=ht(r);return t.jsx(Dn,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:s,children:t.jsx(q.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:n})})});bt.displayName=xt;var gt="TabsTrigger",vt=i.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,disabled:o=!1,...a}=e,c=Te(gt,r),l=ht(r),u=jt(c.baseId,s),m=St(c.baseId,s),f=s===c.value;return t.jsx($n,{asChild:!0,...l,focusable:!o,active:f,children:t.jsx(q.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":m,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...a,ref:n,onMouseDown:F(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?c.onValueChange(s):d.preventDefault()}),onKeyDown:F(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&c.onValueChange(s)}),onFocus:F(e.onFocus,()=>{const d=c.activationMode!=="manual";!f&&!o&&d&&c.onValueChange(s)})})})});vt.displayName=gt;var Ct="TabsContent",yt=i.forwardRef((e,n)=>{const{__scopeTabs:r,value:s,forceMount:o,children:a,...c}=e,l=Te(Ct,r),u=jt(l.baseId,s),m=St(l.baseId,s),f=s===l.value,d=i.useRef(f);return i.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),t.jsx(ft,{present:o||f,children:({present:p})=>t.jsx(q.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:m,tabIndex:0,...c,ref:n,style:{...e.style,animationDuration:d.current?"0s":void 0},children:p&&a})})});yt.displayName=Ct;function jt(e,n){return`${e}-trigger-${n}`}function St(e,n){return`${e}-content-${n}`}var zn=pt,qn=bt,Kn=vt,Wn=yt;function Qn({className:e,...n}){return t.jsx(zn,{"data-slot":"tabs",className:H("flex flex-col gap-2",e),...n})}function Jn({className:e,...n}){return t.jsx(qn,{"data-slot":"tabs-list",className:H("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...n})}function We({className:e,...n}){return t.jsx(Kn,{"data-slot":"tabs-trigger",className:H("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Qe({className:e,...n}){return t.jsx(Wn,{"data-slot":"tabs-content",className:H("flex-1 outline-none",e),...n})}function _r({enrollment:e,availableDiscounts:n=[],availableBillings:r=[],sameSchoolYearEnrollments:s=[]}){const o=e.student,a=e.class_arm,c=a==null?void 0:a.year_level,[l,u]=i.useState(!1),[m,f]=i.useState(e.billing_discounts.map(h=>h.id)),[d,p]=i.useState(!1),b=h=>{h.preventDefault(),p(!0),re.post("/billing/apply-discount",{enrollment_id:e.id,discount_ids:m},{onSuccess:()=>{p(!1),u(!1),z.success("Discounts updated successfully")},onError:()=>{p(!1),z.error("Failed to update discounts")}})},C=h=>{f(N=>N.includes(h)?N.filter(T=>T!==h):[...N,h])},[v,x]=i.useState(!1),[g,y]=i.useState(null),[j,S]=i.useState(1),[I,_]=i.useState(null),[R,w]=i.useState(null),[K,te]=i.useState(null),L=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],me=h=>{h.preventDefault(),g&&(p(!0),re.post("/billing/add-billing-item",{enrollment_id:e.id,billing_id:g,quantity:j,month_installment:I,start_month:R,end_month:K},{onSuccess:()=>{z.success("Billing item added successfully"),x(!1),p(!1)},onError:()=>{z.error("Failed to add billing item"),p(!1)}}))};function U(h){return h.toLowerCase().replace(/\b\w/g,N=>N.toUpperCase())}const Pe={cash:"#6366f1",gcash:"#8b5cf6",bank_transfer:"#ec4899",check:"#14b8a6"},[Ae,P]=i.useState(""),[Xn,Ee]=i.useState(null),Nt=s.map(h=>`${h.firstName} ${h.lastName}`),wt=h=>{P(h);const N=s.find(T=>`${T.firstName} ${T.lastName}`.toLowerCase()===h.toLowerCase());N?(Ee(N),re.get(`/billing/students/${N.id}`)):Ee(null)},[It,ne]=i.useState(!1),[Fe,kt]=i.useState(""),[Oe,Mt]=i.useState(""),[W,V]=i.useState([]),[De,Yn]=i.useState(!1),_t=W.reduce((h,N)=>{const T=parseFloat(N.amount);return h+(isNaN(T)?0:T)},0),Rt=[{title:"Students",href:"/billing/students"},{title:`${U(o.firstName)} ${o.middleName?`${o.middleName.charAt(0)}.`:""} ${U(o.lastName)}`,href:"#"}];return t.jsxs($t,{breadcrumbs:Rt,children:[t.jsx(Tt,{title:`${U(o.firstName)} ${o.middleName?`${o.middleName.charAt(0)}.`:""} ${U(o.lastName)}`}),t.jsx(Lt,{richColors:!0,position:"top-center"}),t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[t.jsx("div",{className:"flex justify-start mb-4",children:t.jsx(Ut,{suggestions:Nt,onSelect:wt,placeholder:"Search student"})}),t.jsx(Bt,{student:o,yearLevel:c,toProperCase:U}),t.jsxs(Qn,{defaultValue:"payment",children:[t.jsxs(Jn,{className:"grid w-full grid-cols-2",children:[t.jsx(We,{value:"payment",children:"Payments"}),t.jsx(We,{value:"billing",children:"Billings"})]}),t.jsxs(Qe,{value:"billing",children:[t.jsxs($e,{children:[t.jsxs(Le,{children:[t.jsx(Ue,{children:"Billing Details"}),t.jsx(Be,{children:"A breakdown of this student’s billings with applied discounts."}),t.jsx(Ge,{children:t.jsx(Et,{children:t.jsxs(Ft,{children:[t.jsx(Ot,{className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",children:"Update"}),t.jsxs(Dt,{children:[t.jsxs(Ce,{onClick:()=>x(!0),children:["Add bill item ",t.jsx(ye,{children:t.jsx(Kt,{})})]}),t.jsxs(Ce,{onClick:()=>u(!0),children:["Modify discounts ",t.jsx(ye,{children:t.jsx(Xt,{})})]}),t.jsx(Ce,{asChild:!0,children:t.jsxs("a",{href:route("billing.pdf",e.id),target:"_blank",rel:"noopener noreferrer",children:["Generate Statement ",t.jsx(ye,{children:t.jsx(Qt,{})})]})})]})]})})})]}),t.jsx(Ve,{children:t.jsx(Vt,{billingItems:e.billing_items,discounts:e.billing_discounts,payments:e.payments})})]}),t.jsx(zt,{enrollment:e,months:L,title:"Installment Plan",description:"Monthly billing installment status with discounts and payments."})]}),t.jsx(Qe,{value:"payment",children:t.jsxs($e,{children:[t.jsxs(Le,{children:[t.jsx(Ue,{children:"Payment Records"}),t.jsx(Be,{children:"Track payment history and transaction details."}),t.jsx(Ge,{children:t.jsx(E,{variant:"default",onClick:()=>ne(!0),children:"Add payment"})})]}),t.jsx(Ve,{children:t.jsx(Gt,{payments:e.payments,paymentMethodColors:Pe})})]})})]})]}),t.jsx(he,{open:l,onOpenChange:u,children:t.jsxs(pe,{className:"sm:max-w-lg",children:[t.jsxs(xe,{children:[t.jsx(be,{children:"Modify Discounts"}),t.jsx(ge,{children:"Select applicable discounts for this student."})]}),t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-1",children:n.map(h=>t.jsxs(M,{className:"hover:bg-accent/50 flex items-start gap-3 rounded-lg border p-3 has-[[aria-checked=true]]:border-blue-600 has-[[aria-checked=true]]:bg-blue-50 dark:has-[[aria-checked=true]]:border-blue-900 dark:has-[[aria-checked=true]]:bg-blue-950",children:[t.jsx(pn,{id:`disc-${h.id}`,checked:m.includes(h.id),onCheckedChange:()=>C(h.id),className:"data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-600 data-[state=checked]:text-white dark:data-[state=checked]:border-blue-700 dark:data-[state=checked]:bg-blue-700"}),t.jsxs("div",{className:"grid gap-1.5 font-normal w-full",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-sm font-medium leading-none",children:h.category.name}),t.jsxs(Pt,{variant:"outline",className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums text-xs",children:["- ",h.value==="percentage"?`${h.amount}%`:`₱${h.amount}`]})]}),t.jsx("p",{className:"text-muted-foreground text-sm",children:h.description})]})]},h.id))}),t.jsxs(ve,{children:[t.jsx(E,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),t.jsx(E,{type:"submit",disabled:d,children:d?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),t.jsx(he,{open:v,onOpenChange:x,children:t.jsxs(pe,{className:"sm:max-w-lg",children:[t.jsxs(xe,{children:[t.jsx(be,{children:"Add Bill Item"}),t.jsx(ge,{children:"Select a billing item and quantity."})]}),t.jsxs("form",{onSubmit:me,className:"space-y-4",children:[t.jsxs("div",{className:"grid gap-3",children:[t.jsx(M,{htmlFor:"bill-item",children:"Item"}),t.jsxs(Q,{value:g?String(g):"",onValueChange:h=>y(Number(h)),children:[t.jsx(J,{className:"w-full",children:t.jsx(X,{placeholder:"Select an item"})}),t.jsx(Y,{children:r.map(h=>{var N;return t.jsxs(D,{value:String(h.id),children:[(N=h.category)==null?void 0:N.name," - ₱",parseFloat(h.amount).toFixed(2)]},h.id)})})]})]}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx(M,{htmlFor:"quantity",children:"Quantity"}),t.jsx(Z,{id:"quantity",type:"number",min:"1",value:j,onChange:h=>S(Number(h.target.value)),required:!0})]}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx(M,{htmlFor:"month_installment",children:"Installment Months (Optional)"}),t.jsx(Z,{id:"month_installment",type:"number",min:"1",value:I??"",onChange:h=>_(h.target.value?Number(h.target.value):null)})]}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx(M,{children:"Start Month (Optional)"}),t.jsxs(Q,{value:R?String(R):"",onValueChange:h=>w(Number(h)),children:[t.jsx(J,{className:"w-full",children:t.jsx(X,{placeholder:"Select start month"})}),t.jsx(Y,{children:L.map(h=>t.jsx(D,{value:String(h.value),children:h.label},h.value))})]})]}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx(M,{children:"End Month (Optional)"}),t.jsxs(Q,{value:K?String(K):"",onValueChange:h=>te(Number(h)),children:[t.jsx(J,{className:"w-full",children:t.jsx(X,{placeholder:"Select end month"})}),t.jsx(Y,{children:L.map(h=>t.jsx(D,{value:String(h.value),children:h.label},h.value))})]})]}),t.jsxs(ve,{children:[t.jsx(E,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),t.jsx(E,{type:"submit",disabled:d,children:d?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),t.jsx(he,{open:It,onOpenChange:ne,children:t.jsxs(pe,{className:"sm:max-w-3xl",children:[t.jsxs(xe,{children:[t.jsx(be,{children:"Add Payment"}),t.jsx(ge,{children:"Select billing items and assign payments to each under a single OR."})]}),t.jsxs("form",{onSubmit:h=>{h.preventDefault(),p(!0),re.post("/billing/add-payment",{enrollment_id:e.id,or_number:Fe,payment_date:Oe,items:W.filter(N=>N.billing_id!==null)},{onSuccess:()=>{z.success("Payments successfully recorded."),ne(!1),V([]),p(!1)},onError:()=>{z.error("Failed to record payment."),p(!1)}})},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(M,{htmlFor:"or",children:"OR Number"}),t.jsx(Z,{id:"or",type:"text",value:Fe,onChange:h=>kt(h.target.value),required:!0})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(M,{htmlFor:"paymentDate",children:"Payment Date"}),t.jsx(Z,{id:"paymentDate",type:"date",value:Oe,onChange:h=>Mt(h.target.value),required:!0})]})]}),t.jsxs("div",{className:"border rounded-md p-4 space-y-4 bg-muted/50",children:[W.map((h,N)=>{var T;return t.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end bg-background p-4 rounded-xl shadow-sm border hover:shadow-md transition-all",children:[t.jsxs("div",{className:"col-span-5 grid gap-2",children:[t.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Item"}),t.jsxs(Q,{value:((T=h.billing_id)==null?void 0:T.toString())??"",onValueChange:k=>{const A=parseInt(k);V(O=>O.map((B,fe)=>fe===N?{...B,billing_id:A}:B))},children:[t.jsx(J,{className:"w-full",children:t.jsx(X,{placeholder:"Select item"})}),t.jsx(Y,{children:e.billing_items.map(k=>{var A;return t.jsx(D,{value:k.id.toString(),children:(A=k.category)==null?void 0:A.name},k.id)})})]})]}),t.jsxs("div",{className:"col-span-3 grid gap-2",children:[t.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),t.jsx(Z,{type:"number",value:h.amount,onChange:k=>{const A=k.target.value;V(O=>O.map((B,fe)=>fe===N?{...B,amount:A}:B))}})]}),t.jsxs("div",{className:"col-span-3 grid gap-2",children:[t.jsx(M,{className:"text-sm font-medium text-muted-foreground",children:"Method"}),t.jsxs(Q,{value:h.payment_method,onValueChange:k=>{V(A=>A.map((O,B)=>B===N?{...O,payment_method:k}:O))},children:[t.jsx(J,{className:"w-full",children:t.jsx(X,{placeholder:"Method"})}),t.jsxs(Y,{children:[t.jsx(D,{value:"cash",children:"Cash"}),t.jsx(D,{value:"gcash",children:"GCash"}),t.jsx(D,{value:"bank_transfer",children:"Bank Transfer"}),t.jsx(D,{value:"check",children:"Check"})]})]})]}),t.jsx("div",{className:"col-span-1 flex justify-end",children:t.jsx(E,{variant:"ghost",onClick:()=>V(k=>k.filter((A,O)=>O!==N)),children:"-"})})]},N)}),t.jsxs("div",{className:"pt-2 flex items-center justify-between",children:[t.jsx(E,{type:"button",variant:"secondary",onClick:()=>V(h=>[...h,{billing_id:null,amount:"",payment_method:"cash"}]),children:"+ Add Bill Item"}),t.jsxs("div",{className:"text-right font-medium text-muted-foreground",children:["Total Amount: ",t.jsxs("span",{className:"text-foreground font-semibold",children:["₱",_t.toFixed(2)]})]})]})]}),t.jsxs(ve,{children:[t.jsx(E,{type:"button",variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),t.jsx(E,{type:"submit",disabled:De||W.length===0||W.some(h=>!h.billing_id||!h.amount),children:De?t.jsxs(t.Fragment,{children:[t.jsx(je,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Submit Payment"})]})]})]})})]})}export{_r as default};
